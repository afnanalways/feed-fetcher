<!DOCTYPE html>
<html>
	<head>
		<title>Feed Fetcher - RSS Reader Web App</title>
		<meta
			name="description"
			content="Feed Fetcher is a fast, lightweight RSS and podcast Web Viewer."
		/>
		<link rel="shortcut icon" href="favicon.ico" />
		<link rel="icon" href="favicon.png" />
		<link rel="manifest" href="manifest.json" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-title" content="rdx" />
		<meta name="apple-mobile-web-app-status-bar-style" content="default" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, minimum-scale=1.0"
		/>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="theme.css" type="text/css" />
	</head>
	<body>
		<div id="header">Feed Fetcher</div>
		<div id="pcwrap">
			<div id="filter">
				<div class="pclogo">Feed Fetcher</div>
				<span id="filters">
					<span class="tab active">All</span>
					<span class="tab">Posts</span>
					<span class="tab">Podcasts</span>
					<select name="changechannel">
						<option value="All">All Channels</option><option value="It's FOSS">It's FOSS</option>
					</select></span
				>
			</div>
			<div id="wrap">
				<div class="post" data-channel="It's FOSS" data-ts="1729308857" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="Pi-Apps: The Unofficial but Definitely Better App Store for Raspberry Pi"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 19, 2024</span></div>
<h2><a href="https://itsfoss.com/pi-apps-store/" target="_blank">Pi-Apps: The Unofficial but Definitely Better App Store for Raspberry Pi</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1729239454" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="Seamlessly Connect Your Android Phone and Linux Using GSConnect"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 18, 2024</span></div>
<h2><a href="https://itsfoss.com/gsconnect/" target="_blank">Seamlessly Connect Your Android Phone and Linux Using GSConnect</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1729139385" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="FOSS Weekly #24.42: Ubuntu 24.10, Redox OS Review, LLMs on Pi, KDE Plasma 6.2, Linux Terminal on Android and More"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 17, 2024</span></div>
<h2><a href="https://itsfoss.com/newsletter/foss-weekly-24-42/" target="_blank">FOSS Weekly #24.42: Ubuntu 24.10, Redox OS Review, LLMs on Pi, KDE Plasma 6.2, Linux Terminal on Android and More</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1729065362" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="Active Cooling vs Passive Cooling: What's the difference?"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 16, 2024</span></div>
<h2><a href="https://itsfoss.com/active-passive-cooling/" target="_blank">Active Cooling vs Passive Cooling: What's the difference?</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728875999" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="I Ran 9 Popular LLMs on Raspberry Pi 5; Here's What I Found"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 14, 2024</span></div>
<h2><a href="https://itsfoss.com/llms-for-raspberry-pi/" target="_blank">I Ran 9 Popular LLMs on Raspberry Pi 5; Here's What I Found</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728815157" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="10 Things You Can do on Linux but not on Windows"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 13, 2024</span></div>
<h2><a href="https://itsfoss.com/linux-rules-windows/" target="_blank">10 Things You Can do on Linux but not on Windows</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728616231" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="15 VS Code Tips and Tricks to Make Your Coding Experience Better"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 11, 2024</span></div>
<h2><a href="https://itsfoss.com/vs-code-tips/" target="_blank">15 VS Code Tips and Tricks to Make Your Coding Experience Better</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728534652" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="FOSS Weekly #24.41: elementary OS 8 Features, Thunderbird Tips, NotebookLM, Open Source Internships and More"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 10, 2024</span></div>
<h2><a href="https://itsfoss.com/newsletter/foss-weekly-24-41/" target="_blank">FOSS Weekly #24.41: elementary OS 8 Features, Thunderbird Tips, NotebookLM, Open Source Internships and More</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728459909" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="What Can You do With the Raspberry Pi's Newly Launched AI Camera?"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 09, 2024</span></div>
<h2><a href="https://itsfoss.com/raspberry-pi-ai-camera-projects/" target="_blank">What Can You do With the Raspberry Pi's Newly Launched AI Camera?</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728353998" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="Create Fun Word Cloud Images Easily in Linux Terminal"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 08, 2024</span></div>
<h2><a href="https://itsfoss.com/wordcloud/" target="_blank">Create Fun Word Cloud Images Easily in Linux Terminal</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728272026" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="Meet Open NotebookLM: An Open Source Alternative to Google's NotebookLM"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 07, 2024</span></div>
<h2><a href="https://itsfoss.com/open-notebooklm/" target="_blank">Meet Open NotebookLM: An Open Source Alternative to Google's NotebookLM</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728126820" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="What is a Raspberry Pi HAT? What is it Used for?"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 05, 2024</span></div>
<h2><a href="https://itsfoss.com/raspberry-pi-hat/" target="_blank">What is a Raspberry Pi HAT? What is it Used for?</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1728025927" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="Tips and Tweaks for Handling Message Threads in Thunderbird"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 04, 2024</span></div>
<h2><a href="https://itsfoss.com/thunderbird-threading/" target="_blank">Tips and Tweaks for Handling Message Threads in Thunderbird</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1727929778" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="FOSS Weekly #24.40: Deprecated Commands, SSD Temp, Aria2App, Spotify Customization and More Linux Stuff"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 03, 2024</span></div>
<h2><a href="https://itsfoss.com/newsletter/foss-weekly-24-40/" target="_blank">FOSS Weekly #24.40: Deprecated Commands, SSD Temp, Aria2App, Spotify Customization and More Linux Stuff</a></h2>
</div></div>
<div class="post" data-channel="It's FOSS" data-ts="1727754948" data-audio="0"><div class="leftpan"><img src="https://itsfoss.com/favicon.png" alt="Easily Check NVMe SSD Temperature in Linux"/ ></div><div class="rightpan"><div class="feedname"><span class="channel">It's FOSS</span> &bull; <span class="date">Oct 01, 2024</span></div>
<h2><a href="https://itsfoss.com/ssd-temperature-linux/" target="_blank">Easily Check NVMe SSD Temperature in Linux</a></h2>
</div></div>

			</div>
		</div>
		<div id="floating_player">
			<div class="player_meta">
				<button id="playpausebutton">Play</button
				><span id="title">Not Playing</span> <button id="speed">1x</button
				><button id="plus30">+30s</button>
			</div>
			<div id="timeline_wrap">
				<ul id="chapters"></ul>
				<span id="current_time"></span>
				<span id="timeline">
					<input type="range" id="seekbar" min="0" max="100" step="0.1" />
				</span>
				<span id="duration"></span>
			</div>
		</div>

		<script>
			const tabs = document.querySelectorAll('.tab');
			const posts = document.querySelectorAll('.post');
			const select = document.querySelector('select[name="changechannel"]');
			let selectedChannel = 'All';

			select.addEventListener('change', () => {
				selectedChannel = select.value;
				posts.forEach((post) => {
					const channel = post.getAttribute('data-channel');
					if (selectedChannel === 'All' || channel === selectedChannel) {
						post.style.display = 'block';
					} else {
						post.style.display = 'none';
					}
				});
				tabs.forEach((tab) => {
					tab.classList.remove('active');
					select.classList.add('selected');
				});
			});

			tabs.forEach((tab) => {
				tab.addEventListener('click', () => {
					tabs.forEach((tab) => {
						tab.classList.remove('active');
					});
					tab.classList.add('active');
					const filter = tab.textContent.trim();
					posts.forEach((post) => {
						const audio = parseInt(post.getAttribute('data-audio'));
						const channel = post.getAttribute('data-channel');
						if (
							filter === 'All' ||
							(filter === 'Posts' && audio === 0) ||
							(filter === 'Podcasts' && audio === 1)
						) {
							post.style.display = 'block';
						} else {
							post.style.display = 'none';
						}
					});

					select.value = 'All';
					select.classList.remove('selected');
				});
			});

			document.addEventListener('DOMContentLoaded', function () {
				const btns = document.querySelectorAll('.audio button[data-aid]');
				let caudio = null;
				let ppBtn = null;
				const fpBtn = document.querySelector(
					'#floating_player #playpausebutton'
				);
				const tl = document.querySelector('#timeline');
				const fsb = document.querySelector('#seekbar');

				fpBtn.addEventListener('click', function () {
					togglePP();
				});

				function togglePP() {
					if (caudio && caudio.paused) {
						caudio.play();
					} else if (caudio) {
						caudio.pause();
					}
				}

				tl.addEventListener('input', function (e) {
					const seekPercentage = fsb.value;
					const seekTime = (seekPercentage / 100) * caudio.duration;
					caudio.currentTime = seekTime;
				});

				const speeds = [1, 1.2, 1.5, 1.75, 2];
				let currentSpeedIndex = 0;
				document.getElementById('speed').addEventListener('click', () => {
					currentSpeedIndex = (currentSpeedIndex + 1) % speeds.length;
					const speed = speeds[currentSpeedIndex];
					caudio.playbackRate = speed;
					document.getElementById('speed').innerText = speed + 'x';
					updatePositionState();
				});
				document.getElementById('plus30').addEventListener('click', () => {
					caudio.currentTime += 30;
				});

				function updateAudioTime() {
					const currentTime = caudio.currentTime;
					const formattedCurrentTime = formatTime(currentTime);
					const formattedDuration = formatTime(caudio.duration);

					document.getElementById('current_time').textContent =
						formattedCurrentTime;
					document.getElementById('duration').textContent = formattedDuration;
					const progress = (currentTime / caudio.duration) * 100;
					fsb.value = progress;
				}

				function playTime() {
					navigator.mediaSession.playbackState = 'playing';
					fpBtn.classList.toggle('playing');
					ppBtn.classList.toggle('playing');
					updatePositionState();
				}

				function pauseTime() {
					navigator.mediaSession.playbackState = 'paused';
					fpBtn.classList.toggle('playing');
					ppBtn.classList.toggle('playing');
					updatePositionState();
				}

				function formatTime(time) {
					const minutes = Math.floor(time / 60);
					const seconds = Math.floor(time % 60);
					return ('0' + minutes).slice(-2) + ':' + ('0' + seconds).slice(-2);
				}

				btns.forEach(function (btn) {
					btn.addEventListener('click', function () {
						const aid = this.getAttribute('data-aid');
						const audioElem = document.querySelector(
							'audio[aid="' + aid + '"]'
						);
						changePlayback(audioElem);
					});
				});

				function changePlayback(audioElem) {
					const prevPPBtn = ppBtn;
					ppBtn = document.querySelector(
						'[data-aid="' + audioElem.getAttribute('aid') + '"]'
					);
					const src = audioElem.getAttribute('src');

					if (caudio && caudio !== audioElem) {
						caudio.pause();
						caudio.removeEventListener('timeupdate', updateAudioTime);
						caudio.removeEventListener('play', playTime);
						caudio.removeEventListener('pause', pauseTime);

						prevPPBtn.classList.remove('playing');
						fpBtn.classList.remove('playing');
						fsb.value = '0';

						if (audioElem.readyState >= 1) {
							startPlayback(audioElem);
						} else {
							audioElem.addEventListener('loadedmetadata', function () {
								startPlayback(audioElem);
							});
						}
					} else if (caudio) {
						togglePP();
					} else {
						if (audioElem.readyState >= 1) {
							startPlayback(audioElem);
						} else {
							audioElem.addEventListener('loadedmetadata', function () {
								startPlayback(audioElem);
							});
						}
					}
				}

				function updatePositionState() {
					navigator.mediaSession.setPositionState({
						duration: caudio.duration,
						playbackRate: caudio.playbackRate,
						position: caudio.currentTime,
					});
				}

				function startPlayback(audioElem) {
					const fp = document.querySelector('#floating_player');
					const closestPost = audioElem.closest('.post');
					document
						.querySelectorAll('.post.nowplaying')
						.forEach((e) => e.classList.remove('nowplaying'));
					closestPost.classList.add('nowplaying');
					const h2text = closestPost.querySelector('h2').textContent;
					document.getElementById('title').innerHTML = h2text;
					caudio = audioElem;
					caudio.addEventListener('timeupdate', updateAudioTime);
					caudio.addEventListener('play', playTime);
					caudio.addEventListener('pause', pauseTime);
					const audioDur = caudio.duration;
					const formattedDur = formatTime(audioDur);
					document.getElementById('duration').textContent = formattedDur;
					fp.style.display = 'block';
					setTimeout(function () {
						fp.classList.add('show');
					}, 10);
					caudio.play();

					document.getElementById('speed').innerText =
						caudio.playbackRate + 'x';
					const mediaAlbumArt =
						'https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url=' +
						encodeURIComponent(closestPost.querySelector('img').src) +
						'&container=ig';
					navigator.mediaSession.metadata = new MediaMetadata({
						title: h2text,
						artist: closestPost.querySelector('.channel').textContent,
						album: 'Feed Fetcher',
						artwork: [
							//    {
							//        src: mediaAlbumArt + '&resize_w=128&resize_h=128',
							//        sizes: "128x128",
							//        type: "image/png",
							//    },
							//    {
							//        src: mediaAlbumArt + '&resize_w=96&resize_h=96',
							//        sizes: "96x96",
							//        type: "image/png",
							//    },
							//    {
							//        src: mediaAlbumArt + '&resize_w=192&resize_h=192',
							//        sizes: "192x192",
							//        type: "image/png",
							//    },
							{
								src: closestPost.querySelector('img').src,
							},
						],
					});

					const totalAids = document.querySelectorAll('[data-aid]').length;
					let nextAid = Math.floor(audioElem.getAttribute('aid')) + 1;
					let prevAid = Math.floor(audioElem.getAttribute('aid')) - 1;
					if (nextAid > totalAids - 1) {
						nextAid = 0;
					}
					if (prevAid < 0) {
						prevAid = totalAids - 1;
					}

					navigator.mediaSession.setActionHandler('play', () => {
						caudio.play();
					});
					navigator.mediaSession.setActionHandler('pause', () => {
						caudio.pause();
					});
					// navigator.mediaSession.setActionHandler("seekto", (details) => {
					//     console.log(details);
					//  if (details.fastSeek && caudio) {
					// const newTime = details.seekTime || 0;
					// caudio.currentTime = newTime;
					//  } else if (caudio) {
					// const currentTime = caudio.currentTime || 0;
					//  const seekTime = details.seekTime || 0;
					//  caudio.currentTime = currentTime + seekTime;
					//  }
					//});

					navigator.mediaSession.setActionHandler('nexttrack', () => {
						changePlayback(document.querySelector('[aid="' + nextAid + '"]'));
					});
					navigator.mediaSession.setActionHandler('previoustrack', () => {
						changePlayback(document.querySelector('[aid="' + prevAid + '"]'));
					});
					navigator.mediaSession.setActionHandler('seekbackward', (details) => {
						caudio.currentTime =
							caudio.currentTime - (details.seekOffset || 10);
						updatePositionState();
					});
					navigator.mediaSession.setActionHandler('seekforward', (details) => {
						caudio.currentTime =
							caudio.currentTime + (details.seekOffset || 10);
						updatePositionState();
					});
				}
			});

			const deviceWidth = screen.width;
			const deviceHeight = screen.height;
			const pixelRatio = window.devicePixelRatio || 1;

			const canvas = document.createElement('canvas');
			const ctx = canvas.getContext('2d');

			canvas.width = deviceWidth * pixelRatio;
			canvas.height = deviceHeight * pixelRatio;

			ctx.fillStyle = 'white';
			if (
				window.matchMedia &&
				window.matchMedia('(prefers-color-scheme: dark)').matches
			) {
				ctx.fillStyle = 'black';
			}

			ctx.fillRect(0, 0, canvas.width, canvas.height);
			const iconImage = new Image();
			iconImage.src = 'apple-touch-icon.png';

			iconImage.onload = function () {
				const x = (canvas.width - iconImage.width) / 2;
				const y = (canvas.height - iconImage.height) / 2;

				ctx.drawImage(iconImage, x, y);

				const imageDataURL = canvas.toDataURL('image/png');

				const appleTouchStartupImageLink = document.createElement('link');
				appleTouchStartupImageLink.setAttribute(
					'rel',
					'apple-touch-startup-image'
				);
				appleTouchStartupImageLink.setAttribute('href', imageDataURL);
				document.head.appendChild(appleTouchStartupImageLink);
			};
		</script>
	</body>
</html>
